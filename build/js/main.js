var Img=function(i,a){this.date=i,this.src=a,this.day,this.collect()};Img.prototype.collect=function(){Img.instances.indexOf(this)===-1&&Img.instances.push(this)},Img.prototype.render=function(){$("#image-container").append('<div class="image-wrapper"><div class="view"><img src="img/img-loading.gif" data-src=/gallery/'+this.src+'></div><div class="filter-indicator day'+this.day+'"></div></div>')},Img.instances=[];var initPage=function(){function i(){Img.instances.forEach(function(i){i.day=e.indexOf(i.date)+1,i.render()});for(var i=0;i<4;i++)$("#image-container").append('<div class="image-placeholder"></div>')}var a="/gallery/",e=[];$.ajax({url:a,success:function(i){$(i).find("a").attr("href",function(i,a){if(a.match(/\.(jpe?g|png|gif)$/)){var t=a.match(/\d+(?=_)/g);e.indexOf(t[0])===-1&&e.push(t[0]);new Img(t[0],a)}})},complete:function(){i(),lazyLoad.loadImages(),nav.renderBtns(e)}})}(),lazyLoad=function(){function i(i){var a=i.getBoundingClientRect();return a.top>=-300&&a.left>=-300&&a.bottom/1.4<=$(window).height()&&a.right<=$(window).width()+300}function a(i){setInterval(i,500)}function e(){s&&(s=!1,t())}function t(){var a=$("#image-container img");a.each(function(a){i(this)&&$(this).attr("src",$(this).attr("data-src"))})}var s=!1,n=$(window);return n.on("resize scroll",function(){s=!0,events.emit("scrolled")}),a(e),{loadImages:t}}(),nav=function(){function i(i){var a=""+100/(i.length/.94)+"%";if(i.length>7)alert("Date range of images present in img/gallery folder must not span more than 7 days");else for(var e=0;e<i.length;e++)c.find("ul").append('<li class="day'+(e+1)+'">'+v[e]+"</li>"),f.find("ul").append('<li class="day'+(e+1)+'">Reset</li>');d.find("li").css("width",a)}function a(){n.scrollTop()>=l?(d.removeClass("layout-fluid-full-width").addClass("nav-fixed"),r.removeClass("layout-fluid-full-width").addClass("filter-indicator-main-fixed")):n.scrollTop()<=l&&(d.removeClass("nav-fixed").addClass("layout-fluid-full-width"),r.removeClass("filter-indicator-main-fixed").addClass("layout-fluid-full-width"))}function e(i){var a=i.attr("class").split(" ")[0];f.find("li").removeClass("active"),c.find("li").removeClass("slide-up"),i.hasClass("slide-down")?(i.removeClass("slide-down").addClass("slide-up"),t(),filterImgs.resetFilter()):(c.find(".slide-down").removeClass("slide-down").addClass("slide-up"),i.addClass("slide-down"),f.find("."+a).addClass("active"),t(),s(i),filterImgs.applyFilter(i))}function t(){r.removeClass(function(i,a){return(a.match(/(day)\d+/)||[]).join(" ")})}function s(i){var a=i.attr("class").split(" ")[0];r.addClass(a)}var n=$(window),l=$("#filter-nav").offset().top,d=$("nav"),r=$(".filter-indicator-main"),o=d.find("ul"),c=$("#filter-nav"),f=$("#reset-nav"),v=["Day One","Day Two","Day Three","Day Four","Day Five","Day Six","Day Seven"];return events.on("scrolled",a),o.on("click","li",function(){e($(this))}),{btnLabels:v,renderBtns:i}}(),filterImgs=function(){function i(i){var a=i.attr("class").split(" ")[0];$(".image-wrapper").each(function(i){$(this).find(".filter-indicator").hasClass(a)?$(this).find(".filter-indicator").hasClass(a)&&$(this).show():$(this).hide(),$(this).find("img").attr("src","img/img-loading.gif")}),setTimeout(lazyLoad.loadImages,50)}function a(){$(".image-wrapper").each(function(i){$(this).show(),$(this).find("img").attr("src","img/img-loading.gif")}),setTimeout(lazyLoad.loadImages,50)}$(".filter-indicator-main");return{resetFilter:a,applyFilter:i}}(),viewImg=function(){function i(){var i=$(".image-wrapper-active").next();if("none"!==i.css("display")&&"undefined"!=typeof i.css("display")){$(".filter-indicator").css("visibility","visible"),d.find("#day").removeClass();var a=i.find(".filter-indicator").attr("class").split(" ")[1].match(/\d/)[0],t=i.find(".filter-indicator").attr("class").split(" ")[1];e(),l.addClass("no-scroll"),d.find("#day").html(nav.btnLabels[a-1]),d.find("#day").addClass(t),i.addClass("image-wrapper-active"),i.find(".view").addClass("view-active"),i.find(".filter-indicator").css("visibility","hidden"),lazyLoad.loadImages()}}function a(){var i=$(".image-wrapper-active").prev();if("none"!==i.css("display")&&"undefined"!=typeof i.css("display")){$(".filter-indicator").css("visibility","visible"),d.find("#day").removeClass();var a=i.find(".filter-indicator").attr("class").split(" ")[1].match(/\d/)[0],t=i.find(".filter-indicator").attr("class").split(" ")[1];e(),l.addClass("no-scroll"),d.find("#day").html(nav.btnLabels[a-1]),d.find("#day").addClass(t),i.addClass("image-wrapper-active"),i.find(".view").addClass("view-active"),i.find(".filter-indicator").css("visibility","hidden"),lazyLoad.loadImages()}}function e(){$(".image-wrapper").removeClass("image-wrapper-active"),$(".view").removeClass("view-active"),l.removeClass("no-scroll")}function t(i){var a=i.find(".filter-indicator").attr("class").split(" ")[1].match(/\d/)[0],e=i.find(".filter-indicator").attr("class").split(" ")[1];d.find("#day").removeClass(),l.addClass("no-scroll"),n.show(),i.addClass("image-wrapper-active"),i.find(".view").addClass("view-active"),i.find(".filter-indicator").css("visibility","hidden"),d.find("#day").html(nav.btnLabels[a-1]),d.find("#day").addClass(e)}var s=$("#image-container"),n=$("#modal"),l=$("body"),d=$("#modal-nav");$(".image-wrapper-active");s.on("click",".image-wrapper",function(i){e(),t($(this))}),n.on("click",function(t){t.target==t.currentTarget||"close"==t.target.className?(e(),$(".filter-indicator").css("visibility","visible"),n.hide()):"next"==t.target.className?i():"prev"==t.target.className&&a()})}();
//# sourceMappingURL=../maps/main.js.map
